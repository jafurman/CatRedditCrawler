<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat Page</title>
</head>
<body>
    <h1>Data from MongoDB</h1>
    <div id="randomCatData"></div>

<script>
    async function fetchData() {
        try {
            const response = await fetch('/api/data');
            const data = await response.json();

            // Print the fetched data to the console for inspection
            console.log('Fetched Data:', data);

            // Check if data array is not empty
            if (data.length > 0) {
                // Select a random document from the fetched data
                const randomCat = data[Math.floor(Math.random() * data.length)];

                // Check if randomCat is defined before accessing its properties
                if (randomCat) {
                    // Display selected data on the HTML page
                    const randomCatDataDiv = document.getElementById('randomCatData');
                    randomCatDataDiv.innerHTML = `
                        <p><strong>_id:</strong> ${randomCat._id}</p>
                        <p><strong>display_name:</strong> ${randomCat.display_name}</p>
                        <p><strong>CatDescription:</strong> ${randomCat.CatDescription}</p>
                        <p><strong>subscribers:</strong> ${randomCat.subscribers}</p>
                        <p><strong>active_users:</strong> ${randomCat.active_users}</p>
                        <p><strong>cat-like_words:</strong> ${randomCat['cat-like_words']}</p>
                    `;
                } else {
                    console.error('RandomCat is undefined.');
                }
            } else {
                console.error('Data array is empty.');
            }
        } catch (error) {
            console.error('Error fetching data:', error);
        }
    }

    // Fetch data every 5 seconds
    setInterval(fetchData, 5 * 1000);

    // Comment out the following line to disable fetching every 24 hours
    // setInterval(fetchData, 24 * 60 * 60 * 1000);

    // Initial fetch when the page loads
    fetchData();
</script>
</body>
</html>